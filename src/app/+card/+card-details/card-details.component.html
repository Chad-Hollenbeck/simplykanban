<h4 class="">
  <ol class="breadcrumb font-weight-bold m-0">
    <li class="breadcrumb-item"><a href="javascript:void(0)">Board Name</a></li>
    <li class="breadcrumb-item active">{{projectData.title}}</li>
  </ol>
</h4>

<!-- Header -->
<div class="container-m-nx border-right-0 border-left-0 ui-bordered mb-4">
  <div class="row no-gutters row-bordered row-border-light">
    <div class="col-md-9">
      <div class="media-body container-p-x py-2">
        <div class="d-flex justify-content-between align-items-center mb-1">
          <div><strong class="text-primary text-large">{{completedPercent(projectData.tasks,
              projectData.completedTasks)}}%</strong> completed</div>
          <!-- <div class="text-muted small">{{projectData.tasks - projectData.completedTasks}} opened tasks, {{projectData.completedTasks}} tasks completed</div> -->
          <div class="d-flex flex-wrap">
            <div *ngFor="let tag of projectData.tags" class="badge badge-default mt-1 mr-1">{{tag}}</div>
          </div>
        </div>
        <ngb-progressbar [value]="completedPercent(projectData.tasks, projectData.completedTasks)" height="4px"></ngb-progressbar>
      </div>
    </div>
    <div class="col-md-3">
      <div class="container-p-x py-2">
        <div class="text-muted small">Status</div>
        <strong class="text-big" [ngClass]="'text-' + statuses[projectData.status].color">{{statuses[projectData.status].title}}</strong>
      </div>
    </div>
  </div>
</div>
<!-- / Header -->

<div class="row">
  <div class="col">

    <!-- Description -->
    <div class="card mb-4">
      <h6 class="card-header">Description</h6>
      <div class="card-body" [innerHTML]="projectData.description"></div>
    </div>
    <!-- / Description -->

    <!-- Tasks -->
    <div class="card mb-4">
      <h6 class="card-header">Tasks <button type="button" class="btn btn-primary float-right btn-sm"><i class="fas
            fa-plus"></i>&nbsp; Add task</button>&nbsp;
      </h6>
      <div *ngFor="let section of projectData.taskSections; let i= index">
        <div class="card-body">
          <p class="text-muted small">{{section.title}}</p>

          <div [sortablejs]="section.tasks" [sortablejsOptions]="sortablejsOptions" class="project-task-list
            custom-controls-stacked">
            <div *ngFor="let task of section.tasks" class="project-task-item d-flex" style="justify-content:
              space-between;">

              <label class="ui-todo-item custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" [(ngModel)]="task.completed">
                <span class="custom-control-label">{{task.text}}</span>
                <span *ngIf="task.tags && task.tags.length">
                  <span *ngFor="let tag of task.tags" [ngClass]="'badge-' + taskTags[tag].color" class="badge
                    font-weight-normal ml-2">{{taskTags[tag].title}}</span>
                </span>
                <span *ngIf="task.left" class="ui-todo-badge badge badge-outline-default font-weight-normal ml-2">{{task.left}}
                  left</span>
              </label>

              <div class="d-flex align-items-center">
                <div class="project-task-handle fas fa-arrows-alt text-lightest text-tiny mr-3"></div>

                <div class="btn-group" ngbDropdown [placement]="!isRTL ? 'bottom-right' : 'bottom-left'">
                  <button type="button" class="btn btn-default btn-xs rounded-pill icon-btn borderless md-btn-flat
                    hide-arrow" ngbDropdownToggle><i class="fas fa-ellipsis-v"></i></button>
                  <div ngbDropdownMenu [class.dropdown-menu-right]="!isRTL">
                    <a class="dropdown-item" href="javascript:void(0)">Edit</a>
                    <a class="dropdown-item" href="javascript:void(0)">Remove</a>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>
        <hr class="m-0" *ngIf="i !== (projectData.taskSections.length - 1)">
      </div>
    </div>
    <!-- / Tasks -->

    <!-- Description -->
    <div class="card mb-4">
      <h6 class="card-header">Activity <button class="float-right btn btn-default btn-sm">Hide Activity</button></h6>
      <div class="card-body">

        <div *ngFor="let activity of projectData.activities" class="media pb-1 mb-3">
          <div class="ui-feed-icon-container">
            <span *ngIf="activity.type === 'new_task'" class="ui-icon ui-feed-icon fas fa-plus bg-primary
              text-white"></span>
            <span *ngIf="activity.type === 'pushed_commit'" class="ui-icon ui-feed-icon fas fa-code bg-warning
              text-body"></span>
            <span *ngIf="activity.type === 'completed_task'" class="ui-icon ui-feed-icon fas fa-check-square
              bg-success text-white"></span>
            <span *ngIf="activity.type === 'new_participant'" class="ui-icon ui-feed-icon far fa-user bg-info
              text-white"></span>
            <span *ngIf="activity.type === 'message'" class="ui-icon ui-feed-icon far fa-comment bg-info
              text-white"></span>

            <img [src]="'assets/img/' + activity.user.avatar" class="ui-w-40 rounded-circle" alt>
          </div>
          <div class="media-body align-self-center ml-3">
            <div *ngIf="activity.type === 'new_task'"><a href="javascript:void(0)">{{activity.user.name}}</a> added
              new task <strong>{{activity.data.taskTitle}}</strong></div>
            <div *ngIf="activity.type === 'pushed_commit'"><a href="javascript:void(0)">{{activity.user.name}}</a>
              pushed commit <strong>#{{activity.data.commitId}}</strong></div>
            <div *ngIf="activity.type === 'completed_task'"><a href="javascript:void(0)">{{activity.user.name}}</a>
              completed task <strong>{{activity.data.taskTitle}}</strong></div>
            <div *ngIf="activity.type === 'message'"><a href="javascript:void(0)">{{activity.user.name}}</a>
              commented <strong>{{activity.data.text}}</strong></div>
            <div *ngIf="activity.type === 'new_participant'"><a href="javascript:void(0)">{{activity.user.name}}</a>
              assigned new participant <a href="javascript:void(0)"><strong>{{activity.data.userName}}</strong></a></div>
            <div class="text-muted small">{{activity.date}} ago</div>
          </div>
        </div>

      </div>
    </div>
    <!-- / Description -->

  </div>
  <div class="col-md-4 col-xl-3">
    <!-- Leaders -->
    <div class="card mb-4">
      <h6 class="card-header with-elements">
        <span class="card-header-title">Assigned To</span>
        <div class="card-header-elements ml-auto">
          <button type="button" class="btn btn-xs btn-outline-primary">
            <span class="fas fa-plus"></span> Add
          </button>
        </div>
      </h6>
      <ul class="list-group list-group-flush">
        <div *ngFor="let leader of projectData.leaders" class="list-group-item">
          <div class="media align-items-center">
            <img [src]="'assets/img/' + leader.avatar" class="d-block ui-w-30 rounded-circle" alt="">
            <div class="media-body px-2">
              <a href="javascript:void(0)" class="text-body">{{leader.name}}</a>
            </div>
            <a href="javascript:void(0)" class="d-block text-light text-large font-weight-light">&times;</a>
          </div>
        </div>
      </ul>
    </div>
    <!-- / Leaders -->
    <!-- Project details -->
    <div class="card mb-4">
      <h6 class="card-header">Project details</h6>
      <ul class="list-group list-group-flush">
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="text-muted">Contact</div>
          <div><a href="javascript:void(0)">{{projectData.client.name}}</a></div>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="text-muted">Created at</div>
          <div>{{projectData.created}}</div>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="text-muted">Last update</div>
          <div>{{projectData.lastUpdate}}</div>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="text-muted">Deadline</div>
          <div><strong>{{projectData.deadline}}</strong></div>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="text-muted">Priority</div>
          <div class="btn-group" ngbDropdown [placement]="!isRTL ? 'bottom-right' : 'bottom-left'">
            <button type="button" class="btn btn-xs md-btn-flat"
              [ngClass]="priorityDropdownVariant(projectData.priority)" ngbDropdownToggle>
              <span *ngIf="projectData.priority === 1">High</span>
              <span *ngIf="projectData.priority === 2">Medium</span>
              <span *ngIf="projectData.priority === 3">Low</span>
            </button>
            <div ngbDropdownMenu [class.dropdown-menu-right]="!isRTL">
              <a class="dropdown-item" href="javascript:void(0)" [ngClass]="{active: projectData.priority === 1}">High</a>
              <a class="dropdown-item" href="javascript:void(0)" [ngClass]="{active: projectData.priority === 2}">Medium</a>
              <a class="dropdown-item" href="javascript:void(0)" [ngClass]="{active: projectData.priority === 3}">Low</a>
            </div>
          </div>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="text-muted">Estimated Hours</div>
          <div>{{projectData.hours}}</div>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="text-muted">Total hours</div>
          <div>{{projectData.hours + 10}}</div>
        </li>
      </ul>
    </div>
    <!-- / Project details -->

    <!-- Attached files -->
    <div *ngIf="projectData.attachments && projectData.attachments.length" class="card mb-4">
      <h6 class="card-header">Attached files <button type="button" class="btn btn-primary float-right btn-sm"><i class="fas
            fa-plus"></i>&nbsp; Add file</button></h6>
      <div class="card-body p-3">
        <div class="row no-gutters">
          <div *ngFor="let attachment of projectData.attachments" class="col-md-6 p-1">

            <div class="project-attachment ui-bordered p-2">
              <!-- <div *ngIf="isImage(attachment)" [style.backgroundImage]="'url(\'' + attachment.path + '\')'" class="project-attachment-img"></div>
              <div *ngIf="isFile(attachment)" class="project-attachment-file display-4"><i [ngClass]="fileIcon(attachment)"></i></div> -->
              <div class="media-body ml-3">
                <strong class="project-attachment-filename">{{attachment.name}}</strong>
                <div class="text-muted small">{{attachment.size}}</div>
                <div>
                  <span *ngIf="isImage(attachment)"><a href="javascript:void(0)">View</a> &nbsp;</span>
                  <a href="javascript:void(0)">Download</a>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
    <!-- / Attached files -->


  </div>
</div>
